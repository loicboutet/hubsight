<div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-xl);">
  <form action="<%= @price_reference&.persisted? ? admin_price_reference_path(@price_reference) : admin_price_references_path %>" method="post" accept-charset="UTF-8">
    <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    <% if @price_reference&.persisted? %>
      <input type="hidden" name="_method" value="patch">
    <% end %>
    
    <!-- Contract Classification -->
    <div style="margin-bottom: var(--space-2xl);">
      <h3 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="display: inline-block; vertical-align: middle; margin-right: var(--space-sm);">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
        </svg>
        Classification du Contrat
      </h3>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Famille de Contrat <span style="color: var(--coral-primary);">*</span>
          </label>
          <select name="price_reference[contract_family]" id="price_reference_contract_family" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem;">
            <option value="">Sélectionner une famille...</option>
            <option value="maintenance" <%= 'selected' if @price_reference&.contract_family == 'maintenance' %>>Maintenance</option>
            <option value="insurance" <%= 'selected' if @price_reference&.contract_family == 'insurance' %>>Assurance</option>
            <option value="technical_control" <%= 'selected' if @price_reference&.contract_family == 'technical_control' %>>Contrôle Technique</option>
            <option value="supply" <%= 'selected' if @price_reference&.contract_family == 'supply' %>>Fourniture</option>
            <option value="subcontracting" <%= 'selected' if @price_reference&.contract_family == 'subcontracting' %>>Sous-traitance</option>
            <option value="real_estate" <%= 'selected' if @price_reference&.contract_family == 'real_estate' %>>Immobilier</option>
          </select>
        </div>
        
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Sous-Famille de Contrat <span style="color: var(--coral-primary);">*</span>
          </label>
          <input type="text" name="price_reference[contract_sub_family]" id="price_reference_contract_sub_family" placeholder="ex., Maintenance CVC" value="<%= @price_reference&.contract_sub_family %>" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem;">
        </div>
      </div>
    </div>

    <!-- Equipment & Service -->
    <div style="margin-bottom: var(--space-2xl);">
      <h3 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="display: inline-block; vertical-align: middle; margin-right: var(--space-sm);">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        Détails de l'Équipement et du Service
      </h3>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Type d'Équipement <span style="color: var(--coral-primary);">*</span>
          </label>
          <input type="text" name="price_reference[equipment_type]" id="price_reference_equipment_type" placeholder="ex., Unité de Climatisation" value="<%= @price_reference&.equipment_type %>" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem;">
        </div>
        
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Type de Service <span style="color: var(--coral-primary);">*</span>
          </label>
          <input type="text" name="price_reference[service_type]" id="price_reference_service_type" placeholder="ex., Maintenance Annuelle" value="<%= @price_reference&.service_type %>" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem;">
        </div>
        
        <div style="grid-column: span 2;">
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Caractéristiques Techniques
          </label>
          <textarea name="price_reference[technical_characteristics]" id="price_reference_technical_characteristics" placeholder="ex., Puissance: 10kW, Couverture: 200m², Fréquence: Trimestrielle" rows="3" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem; resize: vertical;"><%= @price_reference&.technical_characteristics %></textarea>
        </div>
      </div>
    </div>

    <!-- Pricing Information -->
    <div style="margin-bottom: var(--space-2xl);">
      <h3 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="display: inline-block; vertical-align: middle; margin-right: var(--space-sm);">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        Informations de Tarification
      </h3>
      
      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Prix de Référence (€) <span style="color: var(--coral-primary);">*</span>
          </label>
          <input type="number" name="price_reference[reference_price]" id="price_reference_reference_price" placeholder="1200.00" step="0.01" value="<%= @price_reference&.reference_price %>" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem;">
        </div>
        
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Unité
          </label>
          <select name="price_reference[unit]" id="price_reference_unit" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem;">
            <option value="per_year" <%= 'selected' if @price_reference&.unit == 'per_year' %>>Par An</option>
            <option value="per_month" <%= 'selected' if @price_reference&.unit == 'per_month' %>>Par Mois</option>
            <option value="per_intervention" <%= 'selected' if @price_reference&.unit == 'per_intervention' %>>Par Intervention</option>
            <option value="per_sqm" <%= 'selected' if @price_reference&.unit == 'per_sqm' %>>Par m²</option>
            <option value="per_unit" <%= 'selected' if @price_reference&.unit == 'per_unit' %>>Par Unité</option>
          </select>
        </div>
        
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Devise
          </label>
          <select name="price_reference[currency]" id="price_reference_currency" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem;">
            <option value="EUR" <%= 'selected' if @price_reference&.currency == 'EUR' %>>EUR (€)</option>
            <option value="USD" <%= 'selected' if @price_reference&.currency == 'USD' %>>USD ($)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Location -->
    <div style="margin-bottom: var(--space-2xl);">
      <h3 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="display: inline-block; vertical-align: middle; margin-right: var(--space-sm);">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        Localisation
      </h3>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Région
          </label>
          <input type="text" name="price_reference[location]" id="price_reference_location" placeholder="ex., Île-de-France" value="<%= @price_reference&.location %>" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem;">
        </div>
        
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Ville/Zone
          </label>
          <input type="text" name="price_reference[city]" id="price_reference_city" placeholder="ex., Paris" value="<%= @price_reference&.city %>" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem;">
        </div>
      </div>
    </div>

    <!-- Additional Information -->
    <div style="margin-bottom: var(--space-2xl);">
      <h3 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="display: inline-block; vertical-align: middle; margin-right: var(--space-sm);">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
        Informations Complémentaires
      </h3>
      
      <div>
        <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
          Notes
        </label>
        <textarea name="price_reference[notes]" id="price_reference_notes" placeholder="Informations complémentaires sur cette référence de prix..." rows="4" style="width: 100%; padding: 12px; border: 1px solid var(--light-gray); border-radius: var(--space-sm); font-size: 1rem; resize: vertical;"><%= @price_reference&.notes %></textarea>
      </div>
    </div>

    <!-- Form Actions -->
    <div style="display: flex; gap: var(--space-md); justify-content: flex-end; padding-top: var(--space-xl); border-top: 1px solid var(--pink-pale);">
      <a href="<%= admin_price_references_path %>" class="typo-btn-cancel" style="display: inline-flex; align-items: center; gap: var(--space-sm);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
        Annuler
      </a>
      <button type="submit" class="typo-btn-success" style="cursor: pointer; display: inline-flex; align-items: center; gap: var(--space-sm);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg>
        Enregistrer la Référence de Prix
      </button>
    </div>
  </form>
</div>
