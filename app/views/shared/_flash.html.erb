<% if flash.any? %>
  <div class="flash-messages" data-controller="flash" style="position: fixed; top: 80px; right: 20px; z-index: 9999; max-width: 400px;">
    <% flash.each do |type, message| %>
      <div class="flash-message flash-<%= type %>" data-flash-target="message" data-action="click->flash#dismiss" style="
        background: <%= type == 'notice' ? '#10b981' : type == 'alert' ? '#ef4444' : '#3b82f6' %>;
        color: white;
        padding: 16px 20px;
        margin-bottom: 10px;
        border-radius: 8px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        display: flex;
        align-items: center;
        justify-content: space-between;
        animation: slideIn 0.3s ease-out;
        cursor: pointer;
      ">
        <div style="display: flex; align-items: center; gap: 12px;">
          <% if type == 'notice' %>
            <svg xmlns="http://www.w3.org/2000/svg" style="width: 24px; height: 24px; flex-shrink: 0;" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          <% elsif type == 'alert' || type == 'error' %>
            <svg xmlns="http://www.w3.org/2000/svg" style="width: 24px; height: 24px; flex-shrink: 0;" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          <% else %>
            <svg xmlns="http://www.w3.org/2000/svg" style="width: 24px; height: 24px; flex-shrink: 0;" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          <% end %>
          <span style="font-weight: 500;"><%= message %></span>
        </div>
        <button type="button" style="background: transparent; border: none; color: white; cursor: pointer; padding: 0; margin-left: 12px; flex-shrink: 0;">
          <svg xmlns="http://www.w3.org/2000/svg" style="width: 20px; height: 20px;" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    <% end %>
  </div>

  <style>
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(100%);
        opacity: 0;
      }
    }
    
    .flash-message.dismissing {
      animation: slideOut 0.3s ease-out forwards;
    }
  </style>
<% end %>
