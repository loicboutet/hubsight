<% content_for :header, "Détails du Contact" %>

<div class="dashboard-container">
  <div class="dashboard-header">
    <div>
      <h1 class="typo-h1"><%= @contact.full_name %></h1>
      <p class="typo-body-small" style="color: var(--medium-gray); margin-top: var(--space-sm);">
        <%= @contact.position || "Contact" %> 
        <% if @contact.organization.present? %>
          • <%= @contact.organization.name %>
        <% end %>
      </p>
    </div>
    
    <div style="display: flex; gap: var(--space-md);">
      <%= link_to contacts_path, class: "typo-btn-secondary" do %>
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" style="margin-right: var(--space-xs);">
          <path d="M15 10H5M5 10L10 5M5 10L10 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Retour à la liste
      <% end %>
      
      <%= link_to edit_contact_path(@contact), class: "typo-btn-primary" do %>
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" style="margin-right: var(--space-xs);">
          <path d="M14.5 2.5C14.8978 2.1022 15.4374 1.87868 16 1.87868C16.2786 1.87868 16.5544 1.93355 16.8118 2.04015C17.0692 2.14674 17.303 2.30301 17.5 2.5C17.697 2.69698 17.8533 2.9308 17.9598 3.18819C18.0665 3.44558 18.1213 3.72142 18.1213 4C18.1213 4.27857 18.0665 4.55442 17.9598 4.81181C17.8533 5.0692 17.697 5.30302 17.5 5.5L6.5 16.5L2 18L3.5 13.5L14.5 2.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Modifier
      <% end %>
    </div>
  </div>

  <div class="card">
    <!-- Personal Information Section -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        Informations Personnelles
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Prénom
          </label>
          <p class="typo-body"><%= @contact.first_name %></p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Nom
          </label>
          <p class="typo-body"><%= @contact.last_name %></p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Organisation
          </label>
          <p class="typo-body">
            <% if @contact.organization.present? %>
              <%= link_to @contact.organization.name, organization_path(@contact.organization), 
                  style: "color: var(--coral-primary); text-decoration: none;" %>
            <% else %>
              -
            <% end %>
          </p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Fonction
          </label>
          <p class="typo-body"><%= @contact.position.present? ? @contact.position : '-' %></p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Service
          </label>
          <p class="typo-body"><%= @contact.department.present? ? @contact.department : '-' %></p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Statut
          </label>
          <p class="typo-body">
            <% if @contact.status == 'active' %>
              <span style="display: inline-block; padding: var(--space-xs) var(--space-md); background-color: var(--success-bg); color: var(--success); border-radius: var(--space-sm); font-size: 0.875rem;">
                Actif
              </span>
            <% else %>
              <span style="display: inline-block; padding: var(--space-xs) var(--space-md); background-color: var(--medium-gray-bg); color: var(--medium-gray); border-radius: var(--space-sm); font-size: 0.875rem;">
                Inactif
              </span>
            <% end %>
          </p>
        </div>
      </div>
    </div>

    <!-- Contact Information Section -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        Coordonnées
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Téléphone Fixe
          </label>
          <p class="typo-body">
            <% if @contact.phone.present? %>
              <a href="tel:<%= @contact.phone %>" style="color: var(--coral-primary); text-decoration: none;">
                <%= @contact.phone %>
              </a>
            <% else %>
              -
            <% end %>
          </p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Téléphone Mobile
          </label>
          <p class="typo-body">
            <% if @contact.mobile.present? %>
              <a href="tel:<%= @contact.mobile %>" style="color: var(--coral-primary); text-decoration: none;">
                <%= @contact.mobile %>
              </a>
            <% else %>
              -
            <% end %>
          </p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Email
          </label>
          <p class="typo-body">
            <% if @contact.email.present? %>
              <a href="mailto:<%= @contact.email %>" style="color: var(--coral-primary); text-decoration: none;">
                <%= @contact.email %>
              </a>
            <% else %>
              -
            <% end %>
          </p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Langues
          </label>
          <p class="typo-body"><%= @contact.languages.present? ? @contact.languages : '-' %></p>
        </div>
      </div>
    </div>

    <!-- Additional Information Section -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        Informations Complémentaires
      </h4>
      
      <div style="display: grid; grid-template-columns: 1fr; gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Disponibilité
          </label>
          <p class="typo-body" style="white-space: pre-wrap;"><%= @contact.availability.present? ? @contact.availability : '-' %></p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: var(--medium-gray);">
            Notes
          </label>
          <p class="typo-body" style="white-space: pre-wrap;"><%= @contact.notes.present? ? @contact.notes : '-' %></p>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div style="display: flex; gap: var(--space-md); justify-content: flex-end; padding-top: var(--space-lg); border-top: 1px solid var(--pink-pale);">
      <%= link_to contacts_path, class: "typo-btn-secondary" do %>
        Retour à la liste
      <% end %>
      
      <%= link_to edit_contact_path(@contact), class: "typo-btn-primary" do %>
        Modifier ce contact
      <% end %>
      
      <%= link_to contact_path(@contact), 
          method: :delete, 
          data: { confirm: "Êtes-vous sûr de vouloir supprimer ce contact ?" },
          class: "typo-btn-danger" do %>
        Supprimer
      <% end %>
    </div>
  </div>
</div>
