<% content_for :header, @contact.full_name %>

<div class="section">
  <!-- Breadcrumb Navigation -->
  <div style="margin-bottom: var(--space-xl);">
    <%= render 'shared/breadcrumb', path: [
      { name: 'Contacts', url: contacts_path },
      { name: @contact.full_name, url: nil }
    ] %>
  </div>

  <!-- Header Section -->
  <div style="margin-bottom: var(--space-xl); display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: var(--space-md);">
    <div style="display: flex; align-items: center; gap: var(--space-md); flex: 1; min-width: 300px;">
      <div style="font-size: 32px;">üë§</div>
      <div>
        <h2 class="typo-h2" style="margin-bottom: var(--space-xs);"><%= @contact.full_name %></h2>
        <% if @contact.position.present? || @contact.organization.present? %>
          <p class="typo-body-small" style="color: var(--medium-gray);">
            <%= @contact.position || "Contact" %>
            <% if @contact.organization.present? %>
              ‚Ä¢ <%= @contact.organization.name %>
            <% end %>
          </p>
        <% end %>
      </div>
    </div>
    <div style="display: flex; gap: var(--space-md); flex-wrap: wrap;">
      <%= link_to edit_contact_path(@contact), class: "typo-btn-small typo-btn-small-primary" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
        √âditer
      <% end %>
      
      <%= link_to contacts_path, class: "typo-btn-cancel" do %>
        ‚Üê Retour √† la liste
      <% end %>
      <%= link_to contact_path(@contact), data: { turbo_method: :delete, turbo_confirm: "√ätes-vous s√ªr de vouloir supprimer ce contact ?" }, class: "typo-btn-small typo-btn-small-danger" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
        Supprimer
      <% end %>
    </div>
  </div>

  <!-- Status Badge -->
  <div style="margin-bottom: var(--space-xl);">
    <% if @contact.status == 'active' %>
      <span style="background-color: #d4edda; color: #155724; padding: 8px 16px; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">
        ‚úì Contact Actif
      </span>
    <% else %>
      <span style="background-color: #f8d7da; color: #721c24; padding: 8px 16px; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">
        ‚úó Contact Inactif
      </span>
    <% end %>
  </div>

  <!-- Main Content -->
  <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--space-xl);">
    <!-- Left Column -->
    <div>
      <!-- Personal Information -->
      <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg); margin-bottom: var(--space-lg);">
        <h3 class="typo-h3" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
          üë§ Informations Personnelles
        </h3>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Pr√©nom</label>
            <p class="typo-body"><%= @contact.first_name %></p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Nom</label>
            <p class="typo-body"><%= @contact.last_name %></p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Fonction</label>
            <p class="typo-body"><%= @contact.position.present? ? @contact.position : '‚Äî' %></p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Service</label>
            <p class="typo-body"><%= @contact.department.present? ? @contact.department : '‚Äî' %></p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Organisation</label>
            <p class="typo-body">
              <% if @contact.organization.present? %>
                <%= link_to @contact.organization.name, organization_path(@contact.organization), 
                    style: "color: var(--purple-primary); text-decoration: none;" %>
              <% else %>
                ‚Äî
              <% end %>
            </p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Langues</label>
            <p class="typo-body"><%= @contact.languages.present? ? @contact.languages : '‚Äî' %></p>
          </div>
        </div>
      </div>

      <!-- Contact Information -->
      <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg); margin-bottom: var(--space-lg);">
        <h3 class="typo-h3" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
          üìû Coordonn√©es
        </h3>
        <div style="display: grid; gap: var(--space-md);">
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
            <div>
              <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">T√©l√©phone Fixe</label>
              <p class="typo-body">
                <% if @contact.phone.present? %>
                  <a href="tel:<%= @contact.phone %>" style="color: var(--purple-primary); text-decoration: none;">
                    üìû <%= @contact.phone %>
                  </a>
                <% else %>
                  ‚Äî
                <% end %>
              </p>
            </div>
            <div>
              <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">T√©l√©phone Mobile</label>
              <p class="typo-body">
                <% if @contact.mobile.present? %>
                  <a href="tel:<%= @contact.mobile %>" style="color: var(--purple-primary); text-decoration: none;">
                    üìû <%= @contact.mobile %>
                  </a>
                <% else %>
                  ‚Äî
                <% end %>
              </p>
            </div>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Email</label>
            <p class="typo-body">
              <% if @contact.email.present? %>
                <a href="mailto:<%= @contact.email %>" style="color: var(--purple-primary); text-decoration: none;">
                  ‚úâÔ∏è <%= @contact.email %>
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="display: inline; vertical-align: middle; margin-left: 4px;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                  </svg>
                </a>
              <% else %>
                ‚Äî
              <% end %>
            </p>
          </div>
        </div>
      </div>

      <!-- Additional Information -->
      <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg);">
        <h3 class="typo-h3" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
          üìù Informations Compl√©mentaires
        </h3>
        <div style="display: grid; gap: var(--space-md);">
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Disponibilit√©</label>
            <p class="typo-body" style="white-space: pre-wrap;"><%= @contact.availability.present? ? @contact.availability : '‚Äî' %></p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Notes</label>
            <p class="typo-body" style="white-space: pre-wrap; color: #666;"><%= @contact.notes.present? ? @contact.notes : '‚Äî' %></p>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column - Quick Info & Stats -->
    <div>
      <!-- Quick Info Card -->
      <div style="background: linear-gradient(135deg, var(--purple-primary) 0%, var(--pink-primary) 100%); border-radius: var(--space-md); padding: var(--space-lg); color: white; margin-bottom: var(--space-lg);">
        <h4 class="typo-h4" style="margin-bottom: var(--space-md);">R√©sum√©</h4>
        <div style="display: grid; gap: var(--space-sm);">
          <div style="padding: var(--space-sm) 0; border-bottom: 1px solid rgba(255,255,255,0.2);">
            <div class="typo-body-small" style="opacity: 0.9; margin-bottom: 4px;">Fonction</div>
            <div class="typo-body-small typo-bold"><%= @contact.position.present? ? @contact.position : "‚Äî" %></div>
          </div>
          <% if @contact.department.present? %>
            <div style="padding: var(--space-sm) 0; border-bottom: 1px solid rgba(255,255,255,0.2);">
              <div class="typo-body-small" style="opacity: 0.9; margin-bottom: 4px;">Service</div>
              <div class="typo-body-small typo-bold"><%= @contact.department %></div>
            </div>
          <% end %>
          <% if @contact.organization.present? %>
            <div style="padding: var(--space-sm) 0; border-bottom: 1px solid rgba(255,255,255,0.2);">
              <div class="typo-body-small" style="opacity: 0.9; margin-bottom: 4px;">Organisation</div>
              <div class="typo-body-small typo-bold"><%= @contact.organization.name %></div>
            </div>
          <% end %>
          <div style="padding: var(--space-sm) 0;">
            <div class="typo-body-small" style="opacity: 0.9; margin-bottom: 4px;">Statut</div>
            <div class="typo-body-small typo-bold"><%= @contact.status == 'active' ? "‚úì Actif" : "‚úó Inactif" %></div>
          </div>
        </div>
      </div>

      <!-- Quick Contact Card -->
      
    </div>
  </div>
</div>
