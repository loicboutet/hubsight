<div style="background-color: var(--white); border-radius: var(--space-md);">
  <%= form_with(model: @organization, local: true) do |f| %>
    <% if @organization.errors.any? %>
      <div style="background-color: #fee; border: 1px solid var(--coral-primary); border-radius: var(--space-sm); padding: var(--space-md); margin-bottom: var(--space-lg);">
        <h4 class="typo-h4" style="color: var(--coral-primary); margin-bottom: var(--space-sm);">
          <%= pluralize(@organization.errors.count, "erreur") %> emp√™che(nt) la sauvegarde :
        </h4>
        <ul style="margin-left: var(--space-lg);">
          <% @organization.errors.full_messages.each do |message| %>
            <li class="typo-body-small"><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <!-- Basic Information Section -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        üìã Informations de Base
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Nom de l'Organisation <span style="color: var(--coral-primary);">*</span>
          </label>
          <%= f.text_field :name, placeholder: "Ex: ENGIE Solutions", required: true, style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Raison Sociale
          </label>
          <%= f.text_field :legal_name, placeholder: "Ex: ENGIE Solutions SAS", style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            SIRET
          </label>
          <%= f.text_field :siret, placeholder: "Ex: 55208131700426", maxlength: 14, style: "width: 100%;" %>
          <p class="typo-body-small" style="color: #999; margin-top: 4px; font-size: 0.75rem;">14 chiffres (num√©ro d'identification de l'entreprise)</p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Type d'Organisation <span style="color: var(--coral-primary);">*</span>
          </label>
          <%= f.select :organization_type,
            Organization::ORGANIZATION_TYPES,
            { include_blank: 'S√©lectionner...' },
            { required: true, style: "width: 100%;" } %>
        </div>
      </div>
    </div>

    <!-- Contact Details Section -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        üìû Coordonn√©es
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div style="grid-column: 1 / -1;">
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Adresse du Si√®ge Social
          </label>
          <%= f.text_area :headquarters_address, rows: 2, placeholder: "Ex: 1 Place Samuel de Champlain, 75016 Paris, France", style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            T√©l√©phone
          </label>
          <%= f.text_field :phone, placeholder: "Ex: +33 1 40 06 20 00", style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Email
          </label>
          <%= f.email_field :email, placeholder: "Ex: contact@example.com", style: "width: 100%;" %>
        </div>

        <div style="grid-column: 1 / -1;">
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Site Web
          </label>
          <%= f.url_field :website, placeholder: "Ex: https://www.example.com", style: "width: 100%;" %>
        </div>
      </div>
    </div>

    <!-- Business Information Section -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        üíº Informations Commerciales
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div style="grid-column: 1 / -1;">
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Sp√©cialit√©s / M√©tiers
          </label>
          <%= f.text_area :specialties, rows: 3, placeholder: "Ex: CVC, √ânergie, Maintenance multi-technique, Gestion technique des b√¢timents", style: "width: 100%;" %>
          <p class="typo-body-small" style="color: #999; margin-top: 4px; font-size: 0.75rem;">Domaines d'expertise et comp√©tences de l'organisation</p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Date de D√©but de Relation
          </label>
          <%= f.date_field :relationship_start_date, style: "width: 100%;" %>
          <p class="typo-body-small" style="color: #999; margin-top: 4px; font-size: 0.75rem;">Date du d√©but de la collaboration</p>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Statut <span style="color: var(--coral-primary);">*</span>
          </label>
          <%= f.select :status,
            [
              ['Actif', 'active'],
              ['Inactif', 'inactive']
            ],
            {},
            { required: true, style: "width: 100%;" } %>
        </div>
      </div>
    </div>

    <!-- Additional Notes Section -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        üìù Notes Compl√©mentaires
      </h4>
      
      <div>
        <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
          Notes
        </label>
        <%= f.text_area :notes, rows: 4, placeholder: "Informations compl√©mentaires, historique de collaboration, particularit√©s, etc.", style: "width: 100%;" %>
      </div>
    </div>

    <!-- Action Buttons -->
    <div style="display: flex; gap: var(--space-md); justify-content: flex-end; padding-top: var(--space-lg); border-top: 1px solid var(--pink-pale);">
      <%= link_to organizations_path, class: "typo-btn-cancel", style: "display: inline-flex; align-items: center; gap: var(--space-sm);" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
        Annuler
      <% end %>
      <button type="submit" class="typo-btn-success" style="cursor: pointer; display: inline-flex; align-items: center; gap: var(--space-sm);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg>
        <%= @organization.new_record? ? "Cr√©er l'Organisation" : "Mettre √† Jour" %>
      </button>
    </div>
  <% end %>
</div>
