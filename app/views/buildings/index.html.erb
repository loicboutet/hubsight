<% content_for :header, "Buildings" %>

<div class="section">
  <div style="margin-bottom: var(--space-xl); display: flex; justify-content: space-between; align-items: center;">
    <div>
      <h2 class="typo-h2" style="margin-bottom: var(--space-sm);">Bâtiments</h2>
      <p class="typo-body-small">Gérer les bâtiments de ce site</p>
    </div>
    <a href="<%= new_site_building_path(@site) %>" class="typo-btn-success" style="display: inline-flex; align-items: center; gap: var(--space-sm);">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
      </svg>
      Nouveau Bâtiment
    </a>
  </div>

  <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-xl);">
    <!-- Filters Section -->
    <div style="margin-bottom: var(--space-xl); padding: var(--space-lg); background-color: #f8f9fa; border-radius: var(--space-sm);">
      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-md);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">Recherche</label>
          <input type="text" placeholder="Nom du bâtiment..." style="width: 100%; padding: 10px; border: 1px solid var(--light-gray); border-radius: var(--space-sm);">
        </div>
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">Catégorie ERP</label>
          <select style="width: 100%; padding: 10px; border: 1px solid var(--light-gray); border-radius: var(--space-sm);">
            <option>Tous</option>
            <option>Type J - Personnes âgées</option>
            <option>Type L - Salles de conférences</option>
            <option>Type M - Magasins</option>
            <option>Type W - Bureaux</option>
          </select>
        </div>
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">Trier par</label>
          <select style="width: 100%; padding: 10px; border: 1px solid var(--light-gray); border-radius: var(--space-sm);">
            <option>Nom (A-Z)</option>
            <option>Année de construction</option>
            <option>Surface</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Buildings Grid -->
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
      <% [
        {name: "Bâtiment A - Principal", year: 1995, area: "12,500 m²", floors: 8, erp: "Type W", energy: "B", certification: "HQE"},
        {name: "Bâtiment B - Annexe", year: 2005, area: "8,200 m²", floors: 5, erp: "Type W", energy: "A", certification: "BREEAM"},
        {name: "Bâtiment C - Stockage", year: 1998, area: "3,400 m²", floors: 2, erp: "Type M", energy: "C", certification: "Aucune"},
        {name: "Bâtiment D - R&D", year: 2015, area: "6,800 m²", floors: 4, erp: "Type R", energy: "A", certification: "LEED"},
      ].each do |building| %>
        <div style="border: 1px solid var(--light-gray); border-radius: var(--space-md); overflow: hidden; transition: box-shadow 0.3s;">
          <!-- Building Header -->
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: var(--space-lg); color: white;">
            <h4 class="typo-h4" style="color: white; margin-bottom: var(--space-xs);"><%= building[:name] %></h4>
            <p class="typo-body-small" style="color: rgba(255,255,255,0.9); font-size: 0.85rem;">Construit en <%= building[:year] %></p>
          </div>
          
          <!-- Building Details -->
          <div style="padding: var(--space-lg);">
            <div style="display: flex; gap: var(--space-sm); margin-bottom: var(--space-md);">
              <span style="display: inline-block; padding: 4px 12px; background-color: #e7f3ff; color: #0066cc; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">
                <%= building[:erp] %>
              </span>
              <span style="display: inline-block; padding: 4px 12px; background-color: #d4edda; color: #155724; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">
                DPE: <%= building[:energy] %>
              </span>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-md); margin-bottom: var(--space-lg);">
              <div>
                <p class="typo-body-small" style="color: #999; font-size: 0.7rem;">SURFACE</p>
                <p class="typo-body-small typo-bold" style="color: var(--coral-primary);"><%= building[:area] %></p>
              </div>
              <div>
                <p class="typo-body-small" style="color: #999; font-size: 0.7rem;">NIVEAUX</p>
                <p class="typo-body-small typo-bold"><%= building[:floors] %></p>
              </div>
              <div>
                <p class="typo-body-small" style="color: #999; font-size: 0.7rem;">CERTIFICATION</p>
                <p class="typo-body-small typo-bold"><%= building[:certification] %></p>
              </div>
            </div>
            
            <div style="display: flex; gap: var(--space-sm);">
              <a href="#" class="typo-btn-small-secondary" style="flex: 1; text-align: center; padding: 8px; font-size: 0.85rem; text-decoration: none;">
                Voir Détails
              </a>
              <a href="#" class="typo-btn-small-primary" style="flex: 1; text-align: center; padding: 8px; font-size: 0.85rem; text-decoration: none;">
                Éditer
              </a>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Pagination -->
    <div style="margin-top: var(--space-xl);">
      <%= render 'shared/pagination', 
        current_page: 1, 
        total_pages: 1, 
        total_count: 4, 
        per_page: 10,
        path: site_buildings_path(@site) %>
    </div>
  </div>
</div>
