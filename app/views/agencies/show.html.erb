<% content_for :header, @agency.display_name %>

<div class="section">
  <!-- Breadcrumb Navigation -->
  <div style="margin-bottom: var(--space-xl);">
    <%= render 'shared/breadcrumb', path: [
      { name: 'Agences', url: agencies_path },
      { name: @agency.display_name, url: nil }
    ] %>
  </div>

  <!-- Header Section -->
  <div style="margin-bottom: var(--space-xl); display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: var(--space-md);">
    <div style="display: flex; align-items: center; gap: var(--space-md); flex: 1; min-width: 300px;">
      <div style="font-size: 32px;">üè™</div>
      <div>
        <h2 class="typo-h2" style="margin-bottom: var(--space-xs);"><%= @agency.display_name %></h2>
        <% if @agency.organization.present? %>
          <p class="typo-body-small" style="color: var(--medium-gray);">
            <%= link_to @agency.organization.name, organization_path(@agency.organization), style: "color: var(--purple-primary); text-decoration: none;" %>
          </p>
        <% end %>
      </div>
    </div>
    <div style="display: flex; gap: var(--space-md); flex-wrap: wrap;">
      <%= link_to edit_agency_path(@agency), class: "typo-btn-small typo-btn-small-primary" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
        √âditer
      <% end %>
      
      <%= link_to agencies_path, class: "typo-btn-cancel" do %>
        ‚Üê Retour √† la liste
      <% end %>
      <%= link_to agency_path(@agency), data: { turbo_method: :delete, turbo_confirm: "√ätes-vous s√ªr de vouloir supprimer cette agence ?" }, class: "typo-btn-small typo-btn-small-danger" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
        Supprimer
      <% end %>
    </div>
  </div>

  <!-- Status Badge -->
  <div style="margin-bottom: var(--space-xl);">
    <% if @agency.active? %>
      <span style="background-color: #d4edda; color: #155724; padding: 8px 16px; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">
        ‚úì Agence Active
      </span>
    <% else %>
      <span style="background-color: #f8d7da; color: #721c24; padding: 8px 16px; border-radius: 16px; font-size: 0.875rem; font-weight: 600;">
        ‚úó Agence Inactive
      </span>
    <% end %>
  </div>

  <!-- Main Content -->
  <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--space-xl);">
    <!-- Left Column -->
    <div>
      <!-- Basic Information -->
      <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg); margin-bottom: var(--space-lg);">
        <h3 class="typo-h3" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
          üìã Informations de Base
        </h3>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Nom</label>
            <p class="typo-body"><%= @agency.name %></p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Code</label>
            <p class="typo-body"><%= @agency.code.present? ? @agency.code : "‚Äî" %></p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Type</label>
            <% if @agency.agency_type.present? %>
              <span style="background-color: var(--purple-pale); color: var(--purple-primary); padding: 4px 12px; border-radius: 12px; font-size: 0.875rem; font-weight: 600;">
                <%= @agency.type_label %>
              </span>
            <% else %>
              <p class="typo-body">‚Äî</p>
            <% end %>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Organisation</label>
            <p class="typo-body">
              <% if @agency.organization.present? %>
                <%= link_to @agency.organization.name, organization_path(@agency.organization), style: "color: var(--purple-primary); text-decoration: none;" %>
              <% else %>
                ‚Äî
              <% end %>
            </p>
          </div>
        </div>
      </div>

      <!-- Location Information -->
      <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg); margin-bottom: var(--space-lg);">
        <h3 class="typo-h3" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
          üìç Localisation
        </h3>
        <div style="display: grid; gap: var(--space-md);">
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Adresse Compl√®te</label>
            <p class="typo-body"><%= @agency.full_address.present? ? @agency.full_address : "‚Äî" %></p>
          </div>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-lg);">
            <div>
              <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Ville</label>
              <p class="typo-body"><%= @agency.city.present? ? @agency.city : "‚Äî" %></p>
            </div>
            <div>
              <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Code Postal</label>
              <p class="typo-body"><%= @agency.postal_code.present? ? @agency.postal_code : "‚Äî" %></p>
            </div>
            <div>
              <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">R√©gion</label>
              <p class="typo-body"><%= @agency.region.present? ? @agency.region : "‚Äî" %></p>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Information -->
      <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg); margin-bottom: var(--space-lg);">
        <h3 class="typo-h3" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
          üìû Coordonn√©es
        </h3>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">T√©l√©phone</label>
            <p class="typo-body">
              <% if @agency.phone.present? %>
                <a href="tel:<%= @agency.phone %>" style="color: var(--purple-primary); text-decoration: none;">
                  üìû <%= @agency.phone %>
                </a>
              <% else %>
                ‚Äî
              <% end %>
            </p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Email</label>
            <p class="typo-body">
              <% if @agency.email.present? %>
                <a href="mailto:<%= @agency.email %>" style="color: var(--purple-primary); text-decoration: none;">
                  ‚úâÔ∏è <%= @agency.email %>
                </a>
              <% else %>
                ‚Äî
              <% end %>
            </p>
          </div>
        </div>
      </div>

      <!-- Service Details -->
      <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg); margin-bottom: var(--space-lg);">
        <h3 class="typo-h3" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
          üîß D√©tails du Service
        </h3>
        <div style="display: grid; gap: var(--space-md);">
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Zone de Service</label>
            <p class="typo-body" style="white-space: pre-wrap;"><%= @agency.service_area.present? ? @agency.service_area : "‚Äî" %></p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Certifications</label>
            <p class="typo-body" style="white-space: pre-wrap;"><%= @agency.certifications.present? ? @agency.certifications : "‚Äî" %></p>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Sp√©cialit√©s</label>
            <p class="typo-body" style="white-space: pre-wrap;"><%= @agency.specialties.present? ? @agency.specialties : "‚Äî" %></p>
          </div>
        </div>
      </div>

      <!-- Management Information -->
      <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg); margin-bottom: var(--space-lg);">
        <h3 class="typo-h3" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
          üë§ Gestion
        </h3>
        <div style="display: grid; gap: var(--space-md);">
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
            <div>
              <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Responsable</label>
              <p class="typo-body"><%= @agency.manager_name.present? ? @agency.manager_name : "‚Äî" %></p>
            </div>
            <div>
              <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Contact du Responsable</label>
              <p class="typo-body"><%= @agency.manager_contact.present? ? @agency.manager_contact : "‚Äî" %></p>
            </div>
          </div>
          <div>
            <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-xs); color: #666;">Horaires d'Ouverture</label>
            <p class="typo-body" style="white-space: pre-wrap;"><%= @agency.operating_hours.present? ? @agency.operating_hours : "‚Äî" %></p>
          </div>
        </div>
      </div>

      <!-- Notes -->
      <% if @agency.notes.present? %>
        <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg);">
          <h3 class="typo-h3" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
            üìù Notes
          </h3>
          <p class="typo-body" style="white-space: pre-wrap; color: #666;"><%= @agency.notes %></p>
        </div>
      <% end %>
    </div>

    <!-- Right Column - Quick Info & Stats -->
    <div>
      <!-- Quick Info Card -->
      <div style="background: linear-gradient(135deg, var(--purple-primary) 0%, var(--pink-primary) 100%); border-radius: var(--space-md); padding: var(--space-lg); color: white; margin-bottom: var(--space-lg);">
        <h4 class="typo-h4" style="margin-bottom: var(--space-md);">R√©sum√©</h4>
        <div style="display: grid; gap: var(--space-sm);">
          <div style="padding: var(--space-sm) 0; border-bottom: 1px solid rgba(255,255,255,0.2);">
            <div class="typo-body-small" style="opacity: 0.9; margin-bottom: 4px;">Type</div>
            <div class="typo-body-small typo-bold"><%= @agency.type_label || "‚Äî" %></div>
          </div>
          <div style="padding: var(--space-sm) 0; border-bottom: 1px solid rgba(255,255,255,0.2);">
            <div class="typo-body-small" style="opacity: 0.9; margin-bottom: 4px;">Code</div>
            <div class="typo-body-small typo-bold"><%= @agency.code || "‚Äî" %></div>
          </div>
          <div style="padding: var(--space-sm) 0; border-bottom: 1px solid rgba(255,255,255,0.2);">
            <div class="typo-body-small" style="opacity: 0.9; margin-bottom: 4px;">Ville</div>
            <div class="typo-body-small typo-bold"><%= @agency.city || "‚Äî" %></div>
          </div>
          <div style="padding: var(--space-sm) 0;">
            <div class="typo-body-small" style="opacity: 0.9; margin-bottom: 4px;">Statut</div>
            <div class="typo-body-small typo-bold"><%= @agency.active? ? "‚úì Actif" : "‚úó Inactif" %></div>
          </div>
        </div>
      </div>

      <!-- Related Data -->
      <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-lg);">
        <h4 class="typo-h4" style="margin-bottom: var(--space-md);">Donn√©es Li√©es</h4>
        <div style="display: grid; gap: var(--space-sm);">
          <% if @agency.organization.present? %>
            <%= link_to organization_path(@agency.organization), style: "padding: var(--space-sm); background-color: var(--pink-pale); border-radius: var(--space-sm); display: flex; justify-content: space-between; align-items: center; text-decoration: none; transition: background-color 0.2s;" do %>
              <span class="typo-body-small" style="color: var(--dark-gray);">Organisation</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            <% end %>
          <% end %>
          <div style="padding: var(--space-sm); background-color: var(--pink-pale); border-radius: var(--space-sm); display: flex; justify-content: space-between; align-items: center;">
            <span class="typo-body-small">Contrats</span>
            <span class="typo-body-small typo-bold" style="color: var(--purple-primary);">0</span>
          </div>
          <div style="padding: var(--space-sm); background-color: var(--pink-pale); border-radius: var(--space-sm); display: flex; justify-content: space-between; align-items: center;">
            <span class="typo-body-small">√âquipements</span>
            <span class="typo-body-small typo-bold" style="color: var(--purple-primary);">0</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
