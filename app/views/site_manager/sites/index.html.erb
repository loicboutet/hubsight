<% content_for :header, "Mes Sites Assign√©s" %>

<div class="section">
  <div style="margin-bottom: var(--space-xl);">
    <h2 class="typo-h2" style="margin-bottom: var(--space-sm);">Mes Sites Assign√©s</h2>
    <p class="typo-body-small">Sites dont vous √™tes responsable - acc√®s limit√© √† votre p√©rim√®tre</p>
  </div>

  <div style="background-color: var(--white); border-radius: var(--space-md); padding: var(--space-xl);">
    <!-- Sites Grid -->
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
      <% [
        {name: "Tour Montparnasse", address: "33 Avenue du Maine, Paris 75015", type: "Bureaux", area: "120,000 m¬≤", buildings: 1, equipment: 487, contracts: 23, alerts: 3},
        {name: "Campus La D√©fense", address: "15 Esplanade du G√©n√©ral de Gaulle, La D√©fense 92400", type: "Bureaux", area: "85,500 m¬≤", buildings: 4, equipment: 892, contracts: 34, alerts: 5},
        {name: "Centre M√©dical Pasteur", address: "12 Rue Louis Pasteur, Marseille 13001", type: "Sant√©", area: "15,600 m¬≤", buildings: 2, equipment: 234, contracts: 16, alerts: 2},
        {name: "R√©sidence Le Parc", address: "89 Avenue Victor Hugo, Nice 06000", type: "R√©sidentiel", area: "12,500 m¬≤", buildings: 3, equipment: 156, contracts: 12, alerts: 1}
      ].each do |site| %>
        <div style="border: 1px solid var(--light-gray); border-radius: var(--space-md); overflow: hidden;">
          <!-- Site Header -->
          <div style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); padding: var(--space-lg); color: white;">
            <h4 class="typo-h4" style="color: white; margin-bottom: var(--space-xs);"><%= site[:name] %></h4>
            <p class="typo-body-small" style="color: rgba(255,255,255,0.9); font-size: 0.85rem;"><%= site[:address] %></p>
          </div>
          
          <!-- Site Details -->
          <div style="padding: var(--space-lg);">
            <div style="margin-bottom: var(--space-lg);">
              <span style="display: inline-block; padding: 4px 12px; background-color: #e7f3ff; color: #0066cc; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">
                <%= site[:type] %>
              </span>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-md); margin-bottom: var(--space-lg); padding: var(--space-md); background-color: #f8f9fa; border-radius: var(--space-sm);">
              <div>
                <p class="typo-body-small" style="color: #999; font-size: 0.7rem;">SURFACE</p>
                <p class="typo-body-small typo-bold"><%= site[:area] %></p>
              </div>
              <div>
                <p class="typo-body-small" style="color: #999; font-size: 0.7rem;">B√ÇTIMENTS</p>
                <p class="typo-body-small typo-bold"><%= site[:buildings] %></p>
              </div>
              <div>
                <p class="typo-body-small" style="color: #999; font-size: 0.7rem;">√âQUIPEMENTS</p>
                <p class="typo-body-small typo-bold"><%= site[:equipment] %></p>
              </div>
              <div>
                <p class="typo-body-small" style="color: #999; font-size: 0.7rem;">CONTRATS</p>
                <p class="typo-body-small typo-bold"><%= site[:contracts] %></p>
              </div>
            </div>
            
            <% if site[:alerts] > 0 %>
              <div style="padding: var(--space-sm); background-color: #fff3cd; border-left: 4px solid #ffc107; border-radius: var(--space-xs); margin-bottom: var(--space-md);">
                <p class="typo-body-small typo-bold" style="color: #856404; font-size: 0.85rem;">
                  ‚ö†Ô∏è <%= site[:alerts] %> alerte<%= site[:alerts] > 1 ? 's' : '' %> active<%= site[:alerts] > 1 ? 's' : '' %>
                </p>
              </div>
            <% end %>
            
            <div style="display: flex; gap: var(--space-sm);">
              <a href="#" class="typo-btn-primary" style="flex: 1; text-align: center; padding: 10px; font-size: 0.9rem;">
                üìã Voir D√©tails
              </a>
              <a href="#" class="typo-btn-success" style="flex: 1; text-align: center; padding: 10px; font-size: 0.9rem;">
                üìÑ Contrats
              </a>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Info Box -->
    <div style="margin-top: var(--space-2xl); padding: var(--space-lg); background-color: #e7f3ff; border-radius: var(--space-sm);">
      <p class="typo-body-small" style="color: #0066cc;">
        <strong>Responsable de Site:</strong> Vous avez un acc√®s limit√© aux sites qui vous sont assign√©s. 
        Vous pouvez consulter les √©quipements, visualiser et uploader des contrats pour votre p√©rim√®tre.
      </p>
    </div>
  </div>
</div>
