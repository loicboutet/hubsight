<%= form_with(model: space.new_record? ? [level, space] : space, local: true) do |f| %>
  <div style="background-color: var(--white); border-radius: var(--space-md);">
    
    <!-- Basic Information -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        Informations de Base
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Nom de l'Espace <span style="color: var(--coral-primary);">*</span>
          </label>
          <%= f.text_field :name, placeholder: "Ex: Bureau 101, Salle de réunion A...", required: true, style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Type d'Espace
          </label>
          <%= f.select :space_type, [
            ['Bureau', 'Bureau'],
            ['Salle de réunion', 'Salle de réunion'],
            ['Local technique', 'Local technique'],
            ['Réception', 'Réception'],
            ['Salle de formation', 'Salle de formation'],
            ['Cafétéria', 'Cafétéria'],
            ['Sanitaires', 'Sanitaires'],
            ['Circulation', 'Circulation'],
            ['Stockage', 'Stockage'],
            ['Archive', 'Archive'],
            ['Autre', 'Autre']
          ], { include_blank: 'Sélectionner un type' }, { style: "width: 100%;" } %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Surface (m²)
          </label>
          <%= f.number_field :area, placeholder: "Ex: 25.5", step: 0.01, style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Hauteur sous plafond (m)
          </label>
          <%= f.number_field :ceiling_height, placeholder: "Ex: 2.8", step: 0.01, style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Capacité d'accueil (personnes)
          </label>
          <%= f.number_field :capacity, placeholder: "Ex: 10", step: 1, style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Utilisation Principale
          </label>
          <%= f.text_field :primary_use, placeholder: "Ex: Bureaux administratifs", style: "width: 100%;" %>
        </div>
      </div>
    </div>

    <!-- Physical Characteristics -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        Caractéristiques Physiques
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Revêtement de Sol
          </label>
          <%= f.select :floor_covering, [
            ['Moquette', 'Moquette'],
            ['Carrelage', 'Carrelage'],
            ['Parquet', 'Parquet'],
            ['Vinyle', 'Vinyle'],
            ['Béton ciré', 'Béton ciré'],
            ['Autre', 'Autre']
          ], { include_blank: 'Sélectionner' }, { style: "width: 100%;" } %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Revêtement Mural
          </label>
          <%= f.select :wall_covering, [
            ['Peinture', 'Peinture'],
            ['Papier peint', 'Papier peint'],
            ['Carrelage', 'Carrelage'],
            ['Lambris', 'Lambris'],
            ['Autre', 'Autre']
          ], { include_blank: 'Sélectionner' }, { style: "width: 100%;" } %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Type de Plafond
          </label>
          <%= f.select :ceiling_type, [
            ['Faux plafond', 'Faux plafond'],
            ['Dalle béton', 'Dalle béton'],
            ['Plâtre', 'Plâtre'],
            ['Suspendu', 'Suspendu'],
            ['Autre', 'Autre']
          ], { include_blank: 'Sélectionner' }, { style: "width: 100%;" } %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Ventilation
          </label>
          <%= f.select :ventilation, [
            ['Naturelle', 'Naturelle'],
            ['Mécanique', 'Mécanique'],
            ['Double flux', 'Double flux'],
            ['VMC simple flux', 'VMC simple flux'],
            ['Aucune', 'Aucune']
          ], { include_blank: 'Sélectionner' }, { style: "width: 100%;" } %>
        </div>
      </div>
    </div>

    <!-- Technical Infrastructure -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        Infrastructure Technique
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Nombre de Points d'Eau
          </label>
          <%= f.number_field :water_points, placeholder: "Ex: 2", step: 1, min: 0, style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Nombre de Prises Électriques
          </label>
          <%= f.number_field :electrical_outlets, placeholder: "Ex: 8", step: 1, min: 0, style: "width: 100%;" %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Connectivité Réseau
          </label>
          <%= f.select :network_connectivity, [
            ['Câblé (Ethernet)', 'Câblé'],
            ['WiFi', 'WiFi'],
            ['Câblé + WiFi', 'Câblé + WiFi'],
            ['Aucune', 'Aucune']
          ], { include_blank: 'Sélectionner' }, { style: "width: 100%;" } %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Éclairage Naturel (%)
          </label>
          <%= f.number_field :natural_lighting, placeholder: "0-100", step: 0.1, min: 0, max: 100, style: "width: 100%;" %>
        </div>
      </div>
    </div>

    <!-- Comfort & Accessibility -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        Confort & Accessibilité
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-lg);">
        <div style="display: flex; align-items: center; gap: var(--space-sm);">
          <%= f.check_box :heating, style: "width: auto;" %>
          <label class="typo-body-small" style="margin: 0;">Chauffage</label>
        </div>

        <div style="display: flex; align-items: center; gap: var(--space-sm);">
          <%= f.check_box :air_conditioning, style: "width: auto;" %>
          <label class="typo-body-small" style="margin: 0;">Climatisation</label>
        </div>

        <div style="display: flex; align-items: center; gap: var(--space-sm);">
          <%= f.check_box :has_windows, style: "width: auto;" %>
          <label class="typo-body-small" style="margin: 0;">Fenêtres</label>
        </div>

        <div style="display: flex; align-items: center; gap: var(--space-sm);">
          <%= f.check_box :pmr_accessibility, style: "width: auto;" %>
          <label class="typo-body-small" style="margin: 0;">Accessible PMR</label>
        </div>
      </div>
    </div>

    <!-- Classification & Additional Info -->
    <div style="margin-bottom: var(--space-xl);">
      <h4 class="typo-h4" style="margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 2px solid var(--pink-pale);">
        Classification & Informations Complémentaires
      </h4>
      
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-lg);">
        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Zone de Regroupement
          </label>
          <%= f.select :grouping_zone, [
            ['Zone Administrative', 'Administrative'],
            ['Zone Technique', 'Technique'],
            ['Zone Commerciale', 'Commerciale'],
            ['Zone de Circulation', 'Circulation'],
            ['Zone de Stockage', 'Stockage']
          ], { include_blank: 'Sélectionner' }, { style: "width: 100%;" } %>
        </div>

        <div>
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Code OmniClass (Table 13)
          </label>
          <%= f.text_field :omniclass_code, placeholder: "Ex: 13-21 11 00", style: "width: 100%;" %>
          <p class="typo-body-small" style="color: var(--medium-gray); margin-top: var(--space-xs); font-size: 0.75rem;">
            Classification internationale BIM des espaces
          </p>
        </div>

        <div style="grid-column: 1 / -1;">
          <label class="typo-body-small typo-bold" style="display: block; margin-bottom: var(--space-sm);">
            Notes
          </label>
          <%= f.text_area :notes, rows: 4, placeholder: "Informations complémentaires...", style: "width: 100%;" %>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div style="display: flex; gap: var(--space-md); justify-content: flex-end; padding-top: var(--space-lg); border-top: 1px solid var(--pink-pale);">
      <%= link_to level ? level_path(level.id) : spaces_path, class: "typo-btn-cancel", style: "display: inline-flex; align-items: center; gap: var(--space-sm);" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
        Annuler
      <% end %>
      <button type="submit" class="typo-btn-success" style="cursor: pointer; display: inline-flex; align-items: center; gap: var(--space-sm);">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg>
        <%= space.new_record? ? "Créer l'Espace" : "Mettre à Jour l'Espace" %>
      </button>
    </div>
  </div>
<% end %>
