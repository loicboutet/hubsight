<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HubSight - Project Backlogs</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; background-color: #f5f5f5; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; background-color: white; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-radius: 8px; }
        h1 { color: #2c3e50; margin-bottom: 10px; font-size: 2.5em; }
        .subtitle { color: #7f8c8d; margin-bottom: 30px; font-size: 1.1em; }
        .stats { display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap; }
        .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; flex: 1; min-width: 200px; }
        .stat-number { font-size: 2em; font-weight: bold; margin-bottom: 5px; }
        .stat-label { opacity: 0.9; font-size: 0.9em; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
        thead { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        th { padding: 15px 12px; text-align: left; font-weight: 600; position: sticky; top: 0; z-index: 10; }
        td { padding: 12px; border-bottom: 1px solid #e0e0e0; vertical-align: top; }
        tr:hover { background-color: #f8f9fa; }
        .sl-col { width: 60px; text-align: center; font-weight: bold; color: #667eea; }
        .brick-col { width: 100px; font-weight: 600; color: #764ba2; }
        .title-col { width: 250px; font-weight: 600; color: #2c3e50; }
        .description-col { min-width: 300px; }
        .url-col { width: 200px; word-break: break-word; }
        .url-col a { color: #667eea; text-decoration: none; }
        .url-col a:hover { text-decoration: underline; }
        .test-col { min-width: 350px; font-size: 13px; color: #555; }
        .video-col { width: 120px; text-align: center; }
        .empty-cell { color: #bdc3c7; font-style: italic; }
        .status-badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 11px; font-weight: 600; margin-left: 8px; }
        .status-done { background-color: #4caf50; color: white; }
        tr.implemented { background-color: #e8f5e9; }
        tr.implemented:hover { background-color: #c8e6c9; }
        @media (max-width: 768px) { .container { padding: 15px; } h1 { font-size: 1.8em; } table { font-size: 12px; } th, td { padding: 8px 6px; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ HubSight - Project Backlogs</h1>
        <p class="subtitle">Complete task breakdown for Brick 1 implementation</p>
        <div class="stats">
            <div class="stat-card"><div class="stat-number">56</div><div class="stat-label">Total Tasks</div></div>
            <div class="stat-card"><div class="stat-number">1</div><div class="stat-label">Brick Phase</div></div>
            <div class="stat-card"><div class="stat-number">14</div><div class="stat-label">Tasks Implemented</div></div>
        </div>
        <table>
            <thead>
                <tr>
                    <th class="sl-col">SL</th>
                    <th class="brick-col">Brick</th>
                    <th class="title-col">Task Title</th>
                    <th class="description-col">Task Description</th>
                    <th class="url-col">URL</th>
                    <th class="test-col">How to Test</th>
                    <th class="video-col">Video</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="sl-col">1</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">User Registration - Sign Up</td>
                    <td class="description-col">Implement user registration/signup form with email, password, name fields. Email verification required before account activation</td>
                    <td class="url-col"><a href="/admin/portfolio_managers/new">/admin/portfolio_managers/new</a> or <a href="/site_managers/new">/site_managers/new</a></td>
                    <td class="test-col">Login as admin (admin@hubsight.com / Password123!), go to /admin/portfolio_managers/new, fill email/first_name/last_name, click Create. Invitation email opens in browser. Click invitation link, set strong password (8+ chars, uppercase, lowercase, digit, special char), activate account. Verify real-time password strength meter shows weak/medium/strong. Verify all requirements turn green with checkmarks.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">2</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">User Login - Sign In</td>
                    <td class="description-col">Implement secure login functionality with email/password, remember me option, and failed login attempt tracking</td>
                    <td class="url-col"><a href="/login">/login</a></td>
                    <td class="test-col">Go to /login, enter email/password, check 'Remember me', click Sign In. Verify redirect to /dashboard. Try wrong password 5 times - account locks. Check letter_opener for unlock email. Click unlock link. Login again successfully. Verify login count increments in profile.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">3</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">Password Reset - Forgot Password</td>
                    <td class="description-col">Implement password reset flow: request reset link via email, verify token, set new password with strength validation</td>
                    <td class="url-col"><a href="/password/new">/password/new</a></td>
                    <td class="test-col">Go to /login, click 'Forgot password?', enter email, submit. Check letter_opener for reset email. Click reset link, enter new strong password (watch strength meter), confirm password, submit. Login with new password. Verify password strength validation works.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">4</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">Email Verification</td>
                    <td class="description-col">Email confirmation system: send verification email on signup, validate confirmation token, activate account</td>
                    <td class="url-col"><a href="Automatic on invitation acceptance">Automatic on invitation acceptance</a></td>
                    <td class="test-col">When accepting invitation (/invitations/accept/:token), email is auto-confirmed. For email changes: go to /profile/edit, change email, save. Check letter_opener for confirmation email. Click confirmation link. Verify new email confirmed and active.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">5</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">User Profile Management</td>
                    <td class="description-col">Allow users to update their profile: name, email, password, notification preferences, language settings</td>
                    <td class="url-col"><a href="/profile/edit">/profile/edit</a></td>
                    <td class="test-col">Login, go to /profile/edit. Update first/last name, phone, department, language (fr/en). Toggle notification preferences (4 checkboxes). To change password: enter current password, new password (watch strength meter), confirm. Click Save. Verify changes persist. Check login history shows: sign-in count, current/last IP, timestamps.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">6</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">Session Management</td>
                    <td class="description-col">Secure session handling with timeout, remember me cookie, concurrent session management, logout functionality</td>
                    <td class="url-col"><a href="/active_sessions">/active_sessions</a></td>
                    <td class="test-col">Login, go to /active_sessions. View active sessions showing device type, browser, OS, IP, timestamps. Login from different browser/device - see multiple sessions listed. Click 'Terminer' on non-current session - that device logged out. Verify cannot end current session. Wait 30 min inactive - session expires. Run CleanupSessionsJob.perform_now in console to test cleanup.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">7</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">Role-Based Access Control (RBAC)</td>
                    <td class="description-col">Implement role-based permissions system for Admin, Portfolio Manager, Site Manager, and Technician roles</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">8</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">Admin - Create Portfolio Manager Account</td>
                    <td class="description-col">Implement functionality for Admin to create and configure Portfolio Manager accounts with proper permissions and organization assignment</td>
                    <td class="url-col"><a href="/admin/portfolio_managers/new">/admin/portfolio_managers/new</a></td>
                    <td class="test-col">Login as admin (admin@hubsight.com / Password123!). Click 'Gestionnaires' in the admin sidebar menu under 'Administration' section. View existing portfolio managers with their organizations and invitation status. Click 'Nouveau Gestionnaire' button. Fill required fields: email, first_name, last_name, select organization from dropdown (or create new via link). Click 'Cr√©er le Gestionnaire'. Verify success message appears. Check letter_opener - invitation email should open with activation link. Click invitation link, set strong password (8+ chars, uppercase, lowercase, digit, special char), watch real-time strength meter. Accept invitation. Login with new credentials. Verify portfolio manager can access their organization's data. Test editing: click 'Modifier' on portfolio manager, update details, save. Verify resend invitation works for pending invitations. Verify admin-only access (non-admin users redirected).</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">9</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">Admin - Access Client Data</td>
                    <td class="description-col">Enable Admin to access client data with formalized contractual authorization, including data isolation and audit logging</td>
                    <td class="url-col"><a href="/admin/clients">/admin/clients</a></td>
                    <td class="test-col">Login as admin (admin@hubsight.com / Password123!). Navigate to /admin/clients to view all client organizations with user statistics. Click 'Acc√©der aux donn√©es' button for any organization. Confirm security warning dialog. Verify prominent red banner appears at top showing organization name with 'Terminer l'acc√®s' button. Access client data (sites, contracts, equipment) - verify all queries automatically scoped to selected organization. Navigate to /admin/access_logs to view audit trail - verify log entry shows: admin email, organization name, IP address, start time, status 'Active'. Click 'Terminer l'acc√®s' in red banner - verify redirect to /admin/clients with success message. Return to /admin/access_logs - verify log entry now shows 'Termin√©e' status with duration calculated. Test timeout: start impersonation, wait 2+ hours (or modify timeout in code for testing), attempt page access - verify automatic session end with timeout message. Test data isolation: impersonate Org A, verify cannot access Org B data. Verify all impersonation features admin-only (non-admin users blocked).</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">10</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">Admin - Client Impersonation</td>
                    <td class="description-col">Implement secure client impersonation feature allowing Admin to view and navigate the platform as a specific client for support purposes</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">11</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Create Site Manager Profiles</td>
                    <td class="description-col">Portfolio Manager can create and manage Site Manager profiles for their organization with role-based permissions</td>
                    <td class="url-col"><a href="/site_managers">/site_managers</a></td>
                    <td class="test-col">Login as portfolio manager (portfolio@hubsight.com / Password123!). Navigate to /site_managers to view list of site managers. Click 'Nouveau Responsable' button. Fill required fields: email, first_name, last_name, phone. Fill optional fields: department, status (active/inactive). Click 'Cr√©er le Responsable'. Verify success message appears. Check letter_opener - invitation email should open with activation link. Verify site manager appears in list with 'Invitation en attente' badge. Click site manager name to view profile - verify all details displayed correctly including invitation status. Click 'Renvoyer l'invitation' button - verify new invitation email sent. Click invitation link, set strong password (8+ chars, uppercase, lowercase, digit, special char), activate account. Login as new site manager - verify access granted. Logout, login as portfolio manager. Click '√âditer' on site manager - update first_name, last_name, phone, department, status. Save changes - verify updates persist. Test filters: search by name/email, filter by status (active/inactive/pending), filter by sites assigned. Click 'Sites' button - verify redirects to /site_managers/:id/assign_sites (site assignment feature from task 12). Test authorization: logout, login as site_manager - verify cannot access /site_managers (redirected with error). Test organization isolation: login as portfolio2@hubsight.com - verify sees only their organization's site managers (not Organization 1's site managers).</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr class="implemented">
                    <td class="sl-col">12</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Assign Sites to Site Managers<span class="status-badge status-done">‚úì DONE</span></td>
                    <td class="description-col">Implement site assignment functionality allowing Portfolio Managers to assign specific sites to Site Manager users</td>
                    <td class="url-col"><a href="/site_managers/:id/assign_sites">/site_managers/:id/assign_sites</a></td>
                    <td class="test-col">Login as portfolio manager (portfolio@hubsight.com / Password123!). Navigate to /site_managers to view list of site managers. Click on a site manager (e.g., Pierre Bernard). On the profile page, click "G√©rer les Sites" button. Verify you're redirected to /site_managers/:id/assign_sites. View available sites from your organization with checkboxes. Test "Tout s√©lectionner/Tout d√©s√©lectionner" to select/deselect all sites. Verify counter updates in real-time showing "X site(s) s√©lectionn√©(s)". Select specific sites by checking individual boxes. Verify counter increments/decrements correctly. Click "Enregistrer les Assignations". Verify success message "Sites assign√©s avec succ√®s." Verify redirect back to site manager profile (/site_managers/:id). Verify "Sites Assign√©s" section now displays assigned sites count (no longer hardcoded 0). Test unassigning: click "G√©rer les Sites" again, uncheck some sites, save. Verify assignments update correctly. Test with multiple site managers to ensure independent assignments. Verify database: check site_assignments table has records with user_id, site_id, assigned_by_name. Test site manager access: login as assigned site manager, go to /my_sites, verify only assigned sites visible (see task 47 for full SM testing).</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">13</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Create and Manage Sites</td>
                    <td class="description-col">Full CRUD functionality for sites including name, address, area, site type, and other attributes from the data model</td>
                    <td class="url-col"><a href="/sites">/sites</a></td>
                    <td class="test-col">Login as portfolio manager (portfolio@hubsight.com / Password123!). Click 'Sites' in sidebar menu. View list of 13 sites with pagination (10 per page). Click 'Nouveau Site' - fill required fields (name, type, address, city, postal code) and optional fields (code, area, contact info, GPS, climate zone, etc.), submit. Click site name to view details. Click '√âditer' to update. Test filters: search by name/city, filter by site type (8 types), filter by region (13 regions), sort options. Click 'Supprimer' and confirm deletion. Navigate pages 1-2 to verify pagination. Login as portfolio2@hubsight.com to verify multi-tenancy (sees only their 12 sites). Verify sites menu accessible from both Admin and User layouts.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr class="implemented">
                    <td class="sl-col">14</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Create and Manage Buildings<span class="status-badge status-done">‚úì DONE</span></td>
                    <td class="description-col">Full CRUD functionality for buildings nested under sites, including construction year, area, ERP classification, energy data, etc.</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col">Login as portfolio manager (portfolio@hubsight.com / Password123!). Go to a site detail page (e.g., /sites/1). Click 'B√¢timents' tab to view list of buildings. Click 'Nouveau B√¢timent' - fill required fields (name, code, construction year, area, status) and optional fields (description, cadastral reference, renovation year, number of levels, height, structure type, ERP category/type, capacity, PMR accessibility, environmental certification, energy consumption, DPE rating, GHG rating, notes). Click 'Cr√©er'. View building details page showing all information and data source tracking (created by, updated by, import source). Click '√âditer' to update building. Test delete functionality. Verify buildings list shows area, levels count, spaces count, equipment count, construction year, and status.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr class="implemented">
                    <td class="sl-col">15</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Create and Manage Levels<span class="status-badge status-done">‚úì DONE</span></td>
                    <td class="description-col">Full CRUD functionality for levels (floors) nested under buildings, including level number, altitude, and floor area</td>
                    <td class="url-col"><a href="/buildings/:building_id/levels">/buildings/:building_id/levels</a></td>
                    <td class="test-col">PREREQUISITES: Task 14 (Buildings) must be completed first. Login as portfolio manager (portfolio@hubsight.com / Password123!). 
                    
CREATE TEST: Go to /sites, select a site, click 'B√¢timents' tab, select a building. On building detail page, look for 'Niveaux' section or navigate directly to /buildings/:building_id/levels. Click 'Nouveau Niveau' button. Fill REQUIRED field: name (examples: "Rez-de-chauss√©e", "1er √©tage", "2√®me √©tage", "Sous-sol -1"). Fill OPTIONAL fields: level_number (numeric: -2=basement 2, -1=basement 1, 0=ground floor, 1=floor 1, 2=floor 2, etc.), altitude in meters (e.g., -3.5 for basement, 0 for ground, 3.2 for 1st floor), area in m¬≤ (e.g., 850.5). Add description if desired. Click 'Cr√©er le Niveau'. Verify: success flash message "Niveau cr√©√© avec succ√®s.", redirected to building detail page showing updated levels count, new level appears in levels list on building page.

VIEW/SHOW TEST: From levels list, click on level name to view detail page. Verify displays: level name, level_number with proper formatting, altitude (formatted as "X m" or blank if not set), area (formatted as "XXX m¬≤" or blank if not set), parent building name with link, site breadcrumb navigation, spaces count (shows 0 initially), equipment count (shows 0 initially), created_by_name, timestamps, description.

UPDATE/EDIT TEST: On level detail page, click '√âditer' button. Modify fields: change name (e.g., "Rez-de-chauss√©e" to "Ground Floor"), update level_number, change altitude value, update area. Click 'Mettre √† Jour le Niveau'. Verify: success message "Niveau mis √† jour avec succ√®s.", redirected to building detail page, changes persist when viewing level again, updated_by_name field populated with current user's name.

ORDERING TEST: Create multiple levels with different level_numbers: create "Sous-sol -1" (level_number: -1), "Rez-de-chauss√©e" (level_number: 0), "1er √©tage" (level_number: 1), "2√®me √©tage" (level_number: 2). View levels list on building page. Verify levels display in ascending order by level_number: basement first, then ground floor, then upper floors.

DELETE TEST: On level detail page or from levels list, click 'Supprimer' button. Confirm deletion in dialog. Verify: success message "Niveau supprim√© avec succ√®s.", redirected to building detail page, level removed from levels list, building's levels count decremented.

VALIDATION TESTS: Try creating level without name - should fail with validation error "Name can't be blank". Try creating level with negative area (e.g., -100) - should fail with validation error. Try invalid level_number format (e.g., "abc") - should fail. All required field validations must prevent save.

AUTHORIZATION TEST: Logout, login as different portfolio manager (portfolio2@hubsight.com / Password123!). Navigate to a building from Organization 1 (try /buildings/1). Verify redirected with error "Acc√®s non autoris√©." Cannot view, create, edit, or delete levels from other organizations' buildings.

ORGANIZATION ISOLATION TEST: Create level in Organization 1's building while logged in as portfolio@hubsight.com. Level should have organization_id matching building's organization_id. Login as portfolio2@hubsight.com, create level in Organization 2's building. Verify each organization sees only their own levels. Database check: confirm levels.organization_id matches parent building.organization_id.

DATA SOURCE TRACKING: When creating level, verify created_by_name field populated with current user's full name. When updating, verify updated_by_name field updated. These fields support import tracking (import_source, import_date) for future Excel import functionality.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr class="implemented">
                    <td class="sl-col">16</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Create and Manage Spaces<span class="status-badge status-done">‚úì DONE</span></td>
                    <td class="description-col">Full CRUD functionality for spaces/rooms nested under levels, including type, area, capacity, usage, and technical characteristics</td>
                    <td class="url-col"><a href="/levels/:level_id/spaces">/levels/:level_id/spaces</a></td>
                    <td class="test-col">PREREQUISITES: Task 15 (Levels) must be completed first. Login as portfolio manager (portfolio@hubsight.com / Password123!). 

CREATE TEST: Go to /sites, select a site, click 'B√¢timents' tab, select a building, click on a level. On level detail page, click 'Nouvel Espace' button. Fill REQUIRED field: name (examples: "Bureau 101", "Salle de r√©union A", "Local technique"). Fill OPTIONAL fields: space_type (Bureau, Salle de r√©union, Local technique, etc.), area in m¬≤ (e.g., 25.5), ceiling_height in m (e.g., 2.8), capacity in people (e.g., 10), primary_use (e.g., "Bureaux administratifs"), secondary_use, floor_covering (Moquette, Carrelage, etc.), wall_covering, ceiling_type, water_points (number), electrical_outlets (number), network_connectivity (C√¢bl√©, WiFi, etc.), natural_lighting (0-100%), ventilation type. Check comfort options: heating, air_conditioning, has_windows, pmr_accessibility. Add grouping_zone (Administrative, Technique, etc.), omniclass_code (e.g., "13-21 11 00"), notes. Click 'Cr√©er l'Espace'. Verify: success flash message "Espace cr√©√© avec succ√®s.", redirected to level detail page showing updated spaces count, new space appears in spaces list on level page.

VIEW/SHOW TEST: From spaces list, click on space name to view detail page. Verify displays: space name, type badge, area (formatted as "XXX m¬≤"), capacity, equipment count, all physical characteristics (floor_covering, wall_covering, ceiling_type, ventilation), technical infrastructure (water_points, electrical_outlets, network_connectivity, natural_lighting%), comfort features (heating, air_conditioning, has_windows, pmr_accessibility shown as Oui/Non), classification (grouping_zone, omniclass_code), parent level/building/site breadcrumb navigation, created_by_name, timestamps.

UPDATE/EDIT TEST: On space detail page, click '√âditer' button. Modify fields: change name, update space_type, change area, ceiling_height, capacity, update coverings and technical fields. Toggle comfort checkboxes. Click 'Mettre √† Jour l'Espace'. Verify: success message "Espace mis √† jour avec succ√®s.", redirected to level detail page, changes persist when viewing space again, updated_by_name field populated with current user's name.

LIST/INDEX TEST: From level page, click 'Espaces' button to view all spaces for the level (/levels/:level_id/spaces). Verify spaces display with: name, type badge, area, capacity, equipment count. Each space has 'Voir' and '√âditer' buttons. Empty state shows "Aucun espace pour ce niveau" with 'Cr√©er le premier espace' button.

DELETE TEST: On space detail page, click 'Supprimer' button. Confirm deletion in dialog. Verify: success message "Espace supprim√© avec succ√®s.", redirected to level detail page, space removed from spaces list, level's spaces count decremented.

VALIDATION TESTS: Try creating space without name - should fail with validation error "Name can't be blank". Try creating space with negative area - should fail. Try negative ceiling_height - should fail. Try negative capacity - should fail. Try natural_lighting > 100 or < 0 - should fail. All required field validations must prevent save.

AUTHORIZATION TEST: Logout, login as different portfolio manager (portfolio2@hubsight.com / Password123!). Navigate to a level from Organization 1. Verify redirected with error "Acc√®s non autoris√©." Cannot view, create, edit, or delete spaces from other organizations' levels.

ORGANIZATION ISOLATION TEST: Create space in Organization 1's level while logged in as portfolio@hubsight.com. Space should have organization_id matching level's organization_id. Login as portfolio2@hubsight.com, create space in Organization 2's level. Verify each organization sees only their own spaces.

DATA SOURCE TRACKING: When creating space, verify created_by_name field populated with current user's full name. When updating, verify updated_by_name field updated. These fields support import tracking (import_source, import_date) for future Excel import functionality.

LEVEL VIEW INTEGRATION: On level detail page (/levels/:id), verify "Espaces de ce Niveau" section displays real spaces from database (not mock data). Shows first 5 spaces with name, type badge, area, capacity, equipment count. 'Nouvel Espace' and 'Espaces' buttons link to create/list pages. Empty state shows "Aucun espace pour ce niveau".</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr class="implemented">
                    <td class="sl-col">17</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Create and Manage Equipment<span class="status-badge status-done">‚úì DONE</span></td>
                    <td class="description-col">Full CRUD functionality for equipment nested under spaces, including manufacturer, model, serial number, commissioning date, technical specs</td>
                    <td class="url-col"><a href="/equipment">/equipment</a></td>
                    <td class="test-col">PREREQUISITES: Task 16 (Spaces) must be completed first. Login as portfolio manager (portfolio@hubsight.com / Password123!). 

CREATE TEST: Go to /sites, select a site, click 'B√¢timents' tab, select a building, click on a level, select a space. On space detail page, click 'Nouvel √âquipement' button. Fill REQUIRED field: name (example: "Climatiseur Daikin AC-500"). Fill OPTIONAL fields: equipment_type, equipment_category, manufacturer (e.g., "Daikin"), model (e.g., "AC-500"), serial_number (e.g., "SN123456789"), bdd_reference, nominal_power (e.g., "3.5 kW"), nominal_voltage (e.g., "230 V"), current, frequency (e.g., "50 Hz"), weight (e.g., "45 kg"), dimensions (e.g., "80 x 60 x 120 cm"), manufacturing_date, commissioning_date, warranty_end_date, next_maintenance_date, supplier, purchase_price, order_number, invoice_number, status (Actif/Inactif/En Maintenance/Hors Service), criticality (Faible/Moyen/√âlev√©/Critique), notes. Click 'Cr√©er l'√âquipement'. Verify: success flash message "√âquipement cr√©√© avec succ√®s.", redirected to equipment detail page, new equipment appears in space's equipment list.

VIEW/SHOW TEST: From equipment list, click on equipment name to view detail page (/equipment/:id). Verify displays: equipment name, manufacturer, model, serial number, all physical characteristics, technical specifications (power, voltage, current, frequency, weight, dimensions), important dates (manufacturing, commissioning, warranty end, next maintenance), installation & warranty info, contracts & maintenance section, contacts section, supplier information (supplier, purchase price, order number, invoice number), status badge, criticality badge, notes, parent space/level/building/site breadcrumb navigation, created_by_name, updated_by_name timestamps.

UPDATE/EDIT TEST: On equipment detail page, click '√âditer' button (/equipment/:id/edit). Modify fields: change name, update manufacturer, model, serial number, change technical specs, update dates, change status, criticality. Click 'Mettre √† Jour l'√âquipement'. Verify: success message "√âquipement mis √† jour avec succ√®s.", redirected to equipment detail page, changes persist when viewing equipment again, updated_by_name field populated with current user's name.

LIST/INDEX TEST: Navigate to /equipment to view all equipment for organization. Verify equipment display with: name, type, manufacturer, model, location hierarchy (space > level > building > site), status. Each equipment has 'Voir' and '√âditer' buttons. Pagination shows 10 per page.

DELETE TEST: On equipment detail page, click 'Supprimer' button. Confirm deletion in dialog "√ätes-vous s√ªr de vouloir supprimer cet √©quipement ? Cette action est irr√©versible." Verify: success message "√âquipement supprim√© avec succ√®s.", redirected to parent space detail page, equipment removed from list, space's equipment count decremented.

VALIDATION TESTS: Try creating equipment without name - should fail with validation error "Name can't be blank". Try creating equipment with invalid numeric values - should fail. All field validations must prevent save.

AUTHORIZATION TEST: Logout, login as different portfolio manager (portfolio2@hubsight.com / Password123!). Navigate to a space from Organization 1. Verify redirected with error "Acc√®s non autoris√©." Cannot view, create, edit, or delete equipment from other organizations' spaces.

ORGANIZATION ISOLATION TEST: Create equipment in Organization 1's space while logged in as portfolio@hubsight.com. Equipment should have organization_id matching space's organization_id. Login as portfolio2@hubsight.com, create equipment in Organization 2's space. Verify each organization sees only their own equipment.

HIERARCHY TRACKING: When creating equipment, verify it inherits site_id, building_id, level_id from parent space automatically through model callbacks. Check equipment.space, equipment.level, equipment.building, equipment.site associations work correctly.

DATA SOURCE TRACKING: When creating equipment, verify created_by_name field populated with current user's full name. When updating, verify updated_by_name field updated. These fields support import tracking (import_source, import_date) for future Excel import functionality.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr class="implemented">
                    <td class="sl-col">18</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Tree View Navigation<span class="status-badge status-done">‚úì DONE</span></td>
                    <td class="description-col">Implement hierarchical tree navigation: Portfolio > Sites > Buildings > Levels > Spaces > Equipment with expand/collapse functionality</td>
                    <td class="url-col"><a href="/portfolio">/portfolio</a></td>
                    <td class="test-col">PREREQUISITES: Tasks 13-17 (Sites, Buildings, Levels, Spaces, Equipment) must be completed first. Login as portfolio manager (portfolio@hubsight.com / Password123!).

NAVIGATION TEST: Click 'Portfolio' in the sidebar menu or navigate to /portfolio. Verify you land on the tree view page with title "Vue Arborescente" and subtitle "Navigation hi√©rarchique de votre portefeuille immobilier".

STATISTICS DISPLAY TEST: At the top of the page, verify 5 gradient statistic cards display with real counts: 1) Sites (should show 13 for Organization 1), 2) B√¢timents (total buildings count), 3) Niveaux (total levels count), 4) Espaces (total spaces count), 5) √âquipements (total equipment count). Each card has distinct gradient colors.

ORGANIZATION ROOT TEST: Verify tree starts with organization root node displaying organization name with briefcase icon in purple gradient header. Shows total sites count in parentheses.

HIERARCHY DISPLAY TEST: Verify complete 6-level hierarchy displays: 1) Organization (root), 2) Sites (blue building icon), 3) Buildings (pink building icon, nested under sites), 4) Levels (cyan layers icon, nested under buildings, ordered by level_number), 5) Spaces (green house icon, nested under levels), 6) Equipment (yellow gear icon, nested under spaces, leaf nodes).

EXPAND/COLLAPSE FUNCTIONALITY TEST: Click on any node with children (shows chevron-right icon). Verify: 1) Children div becomes visible (display: block), 2) Chevron icon rotates 90 degrees downward, 3) Background color changes on hover. Click again to collapse: children hide (display: none), chevron rotates back to right. Test expanding multiple levels simultaneously: Site > Building > Level > Space > Equipment.

ICONS AND BADGES TEST: Verify each level has distinct icon and color: Sites (blue building), Buildings (pink building), Levels (cyan layers), Spaces (green house), Equipment (yellow gear). Verify site type badges display (e.g., "Bureau", "Commercial"). Verify space type badges when present. Verify counts display next to each node showing number of children.

LINKS TEST: Click on any node name (not the expand icon). Verify redirects to corresponding detail page: site_path(site), building_path(building), level_path(level), space_path(space), equipment_path(equipment). Verify links are styled properly (no underline, dark gray color).

EMPTY STATE TEST: Login as a user with no sites (or manually remove all sites temporarily). Navigate to /portfolio. Verify empty state displays: large building icon (opacity 0.3), heading "Aucun site disponible", message with link "Commencez par cr√©er votre premier site" linking to /sites/new.

VISUAL HIERARCHY TEST: Verify indentation increases at each level (margin-left: var(--space-xl)). Verify icon sizes decrease progressively (24px > 20px > 18px > 16px > 14px > 12px). Verify font sizes decrease for deeper levels. Verify leaf nodes (equipment) have no expand icon, just spacing div.

CONTROLLER INTEGRATION TEST: Verify tree_controller.js Stimulus controller is attached (data-controller="tree"). Verify toggle action works (data-action="click->tree#toggle"). Verify targets work correctly (data-tree-target="node", "children", "icon").

HELP TEXT TEST: At bottom of page, verify blue info box with lightbulb emoji displays tip: "Cliquez sur les ic√¥nes de fl√®che pour d√©velopper/r√©duire les niveaux de la hi√©rarchie. Cliquez sur les noms pour acc√©der aux pages de d√©tail."

ORGANIZATION ISOLATION TEST: Login as portfolio@hubsight.com - verify sees 13 sites from Organization 1. Logout, login as portfolio2@hubsight.com - verify sees 12 sites from Organization 2 only, completely different tree structure. Verify no data leakage between organizations.

PERFORMANCE TEST: With full hierarchy of sites/buildings/levels/spaces/equipment, verify tree loads efficiently. Verify expand/collapse is instant with no lag. Verify initial page load shows all nodes collapsed except organization root.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">19</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Import OmniClass Table 23</td>
                    <td class="description-col">Import OmniClass Table 23 equipment classification (256 equipment types) from Excel file provided by client</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">20</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Import Space Structure</td>
                    <td class="description-col">Import space structure including OmniClass Table 13 space classifications (966 types) from Excel file</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">21</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Import Contract Families</td>
                    <td class="description-col">Import contract families and subfamilies (7 families</td>
                    <td class="url-col"><a href="20+ subfamilies) from Excel file provided by client">20+ subfamilies) from Excel file provided by client</a></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">22</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Equipment Search & Autocomplete</td>
                    <td class="description-col">Search and autocomplete system in equipment database to facilitate manual entry, with filtering by technical lot and function</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">23</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Link Equipment to OmniClass</td>
                    <td class="description-col">Manual linking interface for associating equipment with OmniClass classification codes via search system</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">24</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Upload PDF Contracts</td>
                    <td class="description-col">Upload multi-page PDF contract documents with progress indicator and file validation (max size, file type)</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">25</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - OCR Text Extraction (Mistral)</td>
                    <td class="description-col">Integrate Mistral OCR API for text extraction from uploaded PDF documents (~‚Ç¨0.10/contract cost)</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">26</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - LLM Data Structuring (OpenRouter)</td>
                    <td class="description-col">Automatic data extraction via LLM (OpenRouter): contract number, dates, type, provider, durations, renewal, equipment, amounts (72 fields)</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">27</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Validate Extracted Data</td>
                    <td class="description-col">Manual validation interface showing extracted data side-by-side with PDF, allowing corrections and confirmations before saving</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">28</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Manual Contract Creation</td>
                    <td class="description-col">Create contracts manually when no document exists or extraction is incomplete, with comprehensive form for all 72 contract fields</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">29</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Contract Family Search</td>
                    <td class="description-col">Search and autocomplete system in contract family/subfamily database to facilitate manual linking during contract entry</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">30</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Link Services to Contract Families</td>
                    <td class="description-col">Manual linking of services to Contract Family/Subfamily using search system with autocomplete suggestions</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">31</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Auto-Calculate Contract Dates</td>
                    <td class="description-col">Automatically calculate last renewal date, contract expiry date, termination deadline, last amount update date based on contract parameters</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">32</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Auto-Calculate VAT Amounts</td>
                    <td class="description-col">Automatically calculate VAT inclusive amounts from exclusive amounts based on configurable VAT rates</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">33</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - View Contract List</td>
                    <td class="description-col">Display contracts in list/table view with pagination, sorting, and column customization</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">34</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Filter Contracts</td>
                    <td class="description-col">Multiple filter options: by site, building, contract family, service provider, status, date ranges, amount ranges</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">35</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Create Organizations</td>
                    <td class="description-col">Create and manage organizations (companies) with 12 fields: name, legal name, SIRET, type, address, contacts, specialties, status</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">36</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Create Contacts</td>
                    <td class="description-col">Create and manage contacts nested under organizations with 11 fields: name, position, phone, email, availability, languages</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">37</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Create Agencies</td>
                    <td class="description-col">Create and manage agencies/establishments under organizations with address, service area, certifications</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">38</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Organization Search & Autocomplete</td>
                    <td class="description-col">Search and autocomplete for organizations and contacts databases to facilitate manual linking during contract entry</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">39</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Link Organizations to Contracts</td>
                    <td class="description-col">Manual linking of organizations (service providers) to contracts using search system with organization details preview</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">40</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Generate Contract PDF Summary</td>
                    <td class="description-col">Generate PDF summary sheets per contract with emergency numbers, references, equipment list, based on client template</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">41</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Export Contract List</td>
                    <td class="description-col">Export contract list to Excel/CSV with selected columns and applied filters</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">42</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Export Equipment List</td>
                    <td class="description-col">Export equipment list to Excel/CSV with hierarchy context (site > building > level > space)</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">43</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Export Sites Structure</td>
                    <td class="description-col">Export complete sites structure to Excel with hierarchical indentation or nested sheets</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">44</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Portfolio Overview Dashboard</td>
                    <td class="description-col">Dashboard displaying portfolio overview: total sites, buildings, equipment, contracts, total contract value, key metrics</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr class="implemented">
                    <td class="sl-col">45</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Key Indicators Display<span class="status-badge status-done">‚úì DONE</span></td>
                    <td class="description-col">Display key indicators: contracts by status, contracts by family, upcoming renewals, total spend by category</td>
                    <td class="url-col"><a href="/dashboard">/dashboard</a></td>
                    <td class="test-col">Login as portfolio manager (portfolio@hubsight.com / Password123!). Navigate to /dashboard. Verify Key Indicators section displays: 1) Contrats par Statut showing real counts for Actif, En attente, Expir√©, Suspendu with percentages. 2) Renouvellements √† Venir showing contracts expiring in next 30 days (red badge), 31-60 days (yellow badge), 61-90 days (blue badge). 3) D√©penses par Cat√©gorie showing total spending and top 3 families by amount. 4) R√©partition par Famille d'Achats with real percentages, contract counts, and amounts for all families. Verify KPI cards show real data: Sites Total (13), Contrats Actifs (varying count with %), Budget Annuel Total (sum of all contracts). Test multi-tenancy: logout, login as portfolio2@hubsight.com - verify different data shown (12 sites, different contract counts). Verify all data is organization-scoped with no data leakage. Check that indicators update with real database queries, no hardcoded values in Key Indicators section.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr class="implemented">
                    <td class="sl-col">46</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">PM - Analytics Dashboard<span class="status-badge status-done">‚úì DONE</span></td>
                    <td class="description-col">Analytics page with charts and graphs showing contract distribution, spending trends, equipment distribution by type</td>
                    <td class="url-col"><a href="/analytics">/analytics</a></td>
                    <td class="test-col">Login as portfolio manager (portfolio@hubsight.com / Password123!). Navigate to /analytics. Verify three main sections display: 1) Contract Distribution Analysis showing donut charts for distribution by family (Maintenance CVC, S√©curit√©, Nettoyage, Ascenseurs, √âlectricit√©, Plomberie) and by status (Actif, En renouvellement, Expir√©, Suspendu). 2) Spending Trends Analysis showing budget cards (Budget Total: 1,850,000 ‚Ç¨, D√©penses: 1,810,000 ‚Ç¨, Utilisation: 97.8%), monthly spending chart comparing actual vs budget for 12 months, and spending breakdown by contract family with progress bars. 3) Equipment Distribution Analysis showing total count (555), distribution by OmniClass type (CVC, Ascenseurs, √âclairage, Plomberie, S√©curit√©, etc.), top 10 sites by equipment count bar chart, and age distribution stacked bar (0-5 ans, 6-10 ans, 11-15 ans, 16-20 ans, 20+ ans). Verify all charts render correctly with colors, percentages, and legends. All data is mock data with TODOs for real database queries.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">47</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">SM - View Assigned Sites</td>
                    <td class="description-col">Site Manager can view only sites assigned to them by Portfolio Manager with restricted access to other sites</td>
                    <td class="url-col"><a href="/my_sites">/my_sites</a></td>
                    <td class="test-col">Login as portfolio manager (portfolio@hubsight.com / Password123!). Go to /site_managers, click on a site manager (e.g., Pierre Bernard). Click "G√©rer les Sites" button. Select/deselect sites using checkboxes (try "Tout s√©lectionner"). Verify counter updates. Click "Enregistrer les Assignations". Verify success message and assigned sites list appears on profile. Logout. Login as site manager (sitemanager@hubsight.com / Password123!). Go to /my_sites. Verify ONLY 5 assigned sites visible (not all 13 from organization). Click on an assigned site - should work. Try manually accessing a non-assigned site ID in URL - should redirect with "Vous n'avez pas acc√®s √† ce site" error. Verify site manager cannot see unassigned sites. Test with sitemanager2@hubsight.com to verify different assignments (5 different sites). Test organization isolation: sitemanager3@hubsight.com should only see 4 sites from Organization 2.</td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">48</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">SM - View Site Contracts</td>
                    <td class="description-col">View contracts related to assigned sites with read-only access to contract details</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">49</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">SM - Upload Contracts for Scope</td>
                    <td class="description-col">Upload contract PDFs for sites within their scope, triggering OCR/LLM extraction workflow</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">50</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">SM - View Site Equipment</td>
                    <td class="description-col">View list of equipment for assigned sites with hierarchical navigation (building > level > space > equipment)</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">51</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">SM - Generate Contract PDF</td>
                    <td class="description-col">Generate and export contract summary sheets in PDF format for contracts within their scope</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">52</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">System - Data Isolation</td>
                    <td class="description-col">Complete data isolation between clients ensuring no cross-client data access or visibility</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">53</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">System - Responsive Web Design</td>
                    <td class="description-col">Responsive web interface working seamlessly on desktop, tablet, and mobile devices</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">54</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">System - Client Branding</td>
                    <td class="description-col">Clean design with client's graphic charter (logo and colors integration)</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">55</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">System - HTTPS & Security</td>
                    <td class="description-col">Secure hosting in France with HTTPS connections, SSL certificates, and data encryption</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
                <tr>
                    <td class="sl-col">56</td>
                    <td class="brick-col">Brick 1</td>
                    <td class="title-col">System - Global Search</td>
                    <td class="description-col">Global search functionality across contracts, equipment, sites, organizations with faceted filtering</td>
                    <td class="url-col"><span class="empty-cell">-</span></td>
                    <td class="test-col"><span class="empty-cell">-</span></td>
                    <td class="video-col"><span class="empty-cell">-</span></td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>
